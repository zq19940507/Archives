<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>区域-网格-小区-投诉量-万投比</title>
    <link rel="stylesheet" href="../static/css/bootstrap.min.css">
    <link rel="stylesheet" href="../static/css/bootstrap-theme.min.css">
    <script src="../static/js/jquery-1.11.3.min.js"></script>
    <script src="../static/js/bootstrap.min.js"></script>
    <script src="../static/js/echarts.min.js"></script>

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap-theme.min.css">
    <script src="js/jquery-1.11.3.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="/js/echarts.min.js"></script>

    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
    <link href="https://cdn.bootcss.com/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/moment.js/2.22.0/moment-with-locales.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js"></script>
    <style type="text/css">
        .myrow {
            display: flex;
            flex-direction: row;
            /*margin-left:1em;*/
        }

        .xxxx {
            height: 2px;
            background: #999999;
            margin-top: 16px;
            width: 1em;
            margin-left: 1em;
            margin-right: 1em;
        }
    </style>

        <style>
            .box {
                width: 1300px;
                height: 500px;
                background-color: white;
            }
        </style>


</head>
<body>

<div class="container">
    <div class="page-header">
        <h2 align="center">全区-网格-小区-投诉量-万投比</small></h2>
    </div>
</div>



<div class="container">

    <div class="row ">


        <div class="col-md-2" style="float: left" >
            <div class="input-group">
                <div class="input-group-btn">
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false">单元 <span class="caret"></span></button>
                    <ul class="dropdown-menu" id="dany" onclick="choosedany"  th:method="get">
                        <li><a href="#"  >市区</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#">新区</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#">丹徒</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#">丹阳</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#">扬中</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#">句容</a></li>
                        <li role="separator" class="divider"></li>
                    </ul>
                </div><!-- /btn-group -->
                <input type="text" id="dy_in" class="form-control"  name="danyuan" value="" aria-label="..." placeholder="==请选择==">
            </div><!-- /input-group -->
        </div>

<!--        选择显示单元在inptu标签里-->
        <script>
            $("#dany").on("click", "li", function(){
                $("#dy_in").val($(this).text());
            });
        </script>


        <div class="col-md-2" style="float: left">
            <div class="input-group">
                <div class="input-group-btn">
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false">网格 <span class="caret"></span></button>
                    <ul class="dropdown-menu" id="wg">
                        <li><a href="#">市区</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#">新区</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#">丹徒</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#">丹阳</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#">扬中</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#">句容</a></li>
                        <li role="separator" class="divider"></li>
                    </ul>
                </div><!-- /btn-group -->

                <input type="text"  class="form-control"  value="" aria-label="..." placeholder="==请选择==">

            </div><!-- /input-group -->
        </div>


        <div class="input-group col-md-2" style="float: left">
            <span class="input-group-addon" id="sizing-addon2">小区</span>
            <form action="/ch_community">
            <input type="text" class="form-control" id="xiaoqu_in" name="comm" placeholder="请输入小区名" aria-describedby="sizing-addon2">
            </form>
        </div>

        <div class=" col-md-3 " role="group" aria-label="..." style="float: left">
            <a type="button" id="btn" class="btn btn-primary" onclick="dian()">查询</a>
            <a type="button" class="btn btn-info">重置</a>


            <button class="btn btn-success" data-target="#myModal" data-toggle="modal">
                导入数据
            </button>

            <script>
                let btn = document.getElementById("btn");
                function dian() {
                    var dan_y = document.getElementById("dy_in");

                    var xiaoqu_in = document.getElementById("xiaoqu_in");

                    // 开始时间
                    var start_time = document.getElementById("start_time");
                    // 结束时间

                    var end_time = document.getElementById("end_time");

                }


            </script>





            <a class="btn btn-warning" >
                日期
            </a>
            <!--fade 淡入淡出-->
            <div class="modal fade" id="myModal" aria-labelledby="myModallabel" aria-hidden="true" tabindex="-1">
                <div class="modal-dialog">
                    <div class="modal-content">

                        <div class="modal-header">
                            <button class="close" type="button" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h5 class="modal-title" id="myModallabel " style="margin: auto;">请选择文件</h5>
                        </div>

                        <form id="formData" class="form-horizontal" >

                            <div class="modal-body">
                                <div class="form-group ">
                                    <form>
                                        <div class="form-group" style="margin: auto;">

                                            <input type="file" id="exampleInputFile">

                                        </div>
                                    </form>
                                </div>

                            </div>



                            <div class="modal-footer">
                                <button class="btn btn-success" type="button" onclick="">提交</button>
                                <button class="btn btn-danger" type="button" data-dismiss="modal">关闭</button>
                            </div>

                        </form>


                    </div>
                </div>
            </div>



        </div>

        <!--=====================时间组件=====================-->


        <div class="form-group col-md-3 " style="float: left">


            <div class="myrow">

                <div class='input-group date' style="width: 10em;" id='datetimepicker1'>
                    <input type='text' id="start_time" class="timeInput form-control" style="width: 100px" />
                    <span class="input-group-addon">
                    <span class="glyphicon glyphicon-calendar"></span>
                    </span>
                </div>
                <div class="xxxx">

                </div>
                <div class='input-group date' style="width: 10em;" id='datetimepicker2'>
                    <input type='text' id="end_time" class="timeInput form-control" style="width: 100px" />
                    <span class="input-group-addon">
                    <span class="glyphicon glyphicon-calendar"></span>
                    </span>
                </div>
            </div>
        </div>



        <script>
            $(function() {
                $('#form1').hide();
                var picker1 = $('#datetimepicker1').datetimepicker({
                    format: 'YYYY-MM-DD',
                    locale: moment.locale('zh-cn'),
                    //minDate: '2016-7-1'
                });
                var picker2 = $('#datetimepicker2').datetimepicker({
                    format: 'YYYY-MM-DD',
                    locale: moment.locale('zh-cn')
                });
                //动态设置最小值
                picker1.on('dp.change', function(e) {
                    picker2.data('DateTimePicker').minDate(e.date);
                });
                //动态设置最大值
                picker2.on('dp.change', function(e) {
                    picker1.data('DateTimePicker').maxDate(e.date);
                });
            });
            $('#datetimepicker1').datetimepicker({
                format: 'YYYY-MM-DD',
                locale: moment.locale('zh-cn'),
                defaultDate: "2020-7-1"
            });
            $('#datetimepicker2').datetimepicker({
                format: 'YYYY-MM-DD',
                locale: moment.locale('zh-cn'),
                defaultDate: "2020-11-1"
            });
        </script>


        <!--=====================时间组件=====================-->


    </div><!-- /.row -->

</div>

<!--================end================-->
<div class="container" >
    <table class="table table-bordered">
        <caption>xxx万投比TOP10</caption>

        <thead>
        <tr bgcolor="#1e90ff" >
            <th>单元</th>
            <th>区域中心</th>
            <th>代维单位</th>
            <th>小区名称</th>
            <th>小区ID</th>
            <th>广义投诉量</th>
            <th>在网用户数（管线）</th>
            <th>广义万投比</th>
        </tr>
        </thead>


        <tbody>
            <tr th:each="wtb:${wtbs}">
                <td  th:text="${wtb.getLocation()}"></td>
                <td th:text="${wtb.getZone()}"></td>
                <td th:text="${wtb.getDw()}"></td>
                <td th:text="${wtb.getCommunity()}"></td>
                <td th:text="${wtb.getId()}"></td>
                <td th:text="${wtb.getComplaint()}"></td>
                <td th:text="${wtb.getUser_amount()}"></td>
                <td th:text="${wtb.getWtb_amount()}"></td>


            </tr>


        </tbody>

    </table>


</div>



<!--================echarts======================-->

<div  th:each="echart1_day:${echart1_dies} ">
<!--    <input type="hidden" id="ec_dany"  th:value="${echart1_day.getDy()}">-->
    <input  id="ec_wtb" type="hidden" name="sss" th:value="${echart1_day.getWantoubi()}">
<!--    <input type="hidden" id="ec_day"  th:value="${echart1_day.getDay()}">-->

</div>




    <div class="box" id="main"></div>
    <script type="text/javascript"  th:inline="javascript">
       var myChart = echarts.init(document.querySelector(".box"));

       // var temp=$("ec_wtb").val();

       var temp={"echart1_dies":[{"day":1,"dy":"市区营销中心","wantoubi":54},
               {"day":2,"dy":"市区营销中心","wantoubi":57},
               {"day":3,"dy":"市区营销中心","wantoubi":70},
               {"day":4,"dy":"市区营销中心","wantoubi":58},
               {"day":5,"dy":"市区营销中心","wantoubi":53},
               {"day":6,"dy":"市区营销中心","wantoubi":80},
               {"day":7,"dy":"市区营销中心","wantoubi":83},
               {"day":8,"dy":"市区营销中心","wantoubi":100},
               {"day":9,"dy":"市区营销中心","wantoubi":55}]};

       var wan1=$("ec_wtb").val();

       var wan = document.getElementsByName("sss");

       // alert(wan);



       var arr = [];
       for(var i=0;i<wan.length;i++){
           // alert(wan[i].value);
           arr.push(wan[i].value)
       }


       var data2=[]
       var data2=[]
       var data3=[]
       var data4=[]
       var data5=[]
       var data6=[]

        var option={

            title: {
                text: '广义投诉量（万投比）',left:'center'
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'cross',
                    label: {
                        backgroundColor: '#6a7985'
                    }
                }

            },
            legend: {
                data:  ['市区营销中心', '新区营销中心', '丹徒营销中心', '丹阳分公司', '扬中分公司','句容分公司'],
                bottom: 0,
                icon:"rect"
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '8%',
                containLabel: true
            },
            toolbox: {
                feature: {
                    saveAsImage: {}
                }
            },
            xAxis: {
                name:"日期",
                type: 'category',
                boundaryGap: false,
                data: ['1', '2', '3', '4', '5', '6', '7','8','9','10','11','12','13','14','15'
                    ,'16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31']
            },
            yAxis: {
                name:"单元/万",
                type: 'value'
            },
            series: [
                {
                    name: '市区营销中心',
                    type: 'line',

                    data: arr,

                    itemStyle : { normal: {label : {show: true}}}
                },
                {
                    name: '新区营销中心',
                    type: 'line',

                    data: [],
                    itemStyle : { normal: {label : {show: true}}}
                },
                {
                    name: '丹徒营销中心',
                    type: 'line',

                    data: [],
                    itemStyle : { normal: {label : {show: true}}}
                },
                {
                    name: '丹阳分公司',
                    type: 'line',

                    data: [],
                    itemStyle : { normal: {label : {show: true}}}
                },
                {
                    name: '扬中分公司',
                    type: 'line',

                    data: [],
                    itemStyle : { normal: {label : {show: true}}}
                },

                {
                    name: '句容分公司',
                    type: 'line',

                    data: [],
                    itemStyle : { normal: {label : {show: true}}}
                }
            ]
        };
        myChart.setOption(option);
    </script>

<!--<td th:text="${wtb.getWtb_amount()}"></td>-->


<!--    <script>-->
<!--        var r =document.getElementById('test').value;-->

<!--    </script>-->

</body>
</html>